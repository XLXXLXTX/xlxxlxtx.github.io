---
interface Event {
  startDate: string;
  endDate: string;
  title: string;
  location: string;
  institution: string;
  type: 'work' | 'education';
  schedule: string;
  description: string;
}

interface Props {
  event: Event;
}

const { event } = Astro.props;
---

<div class={`timeline-item ${event.type === 'work' ? 'left' : 'right'}`}>
  <div class="timeline-icon">
    <img src={event.type === 'work'
        ? 'https://img.icons8.com/pulsar-line/48/business.png'
        : 'https://img.icons8.com/pulsar-line/48/graduation-cap.png'}
      alt={event.type === 'work' ? 'work' : 'education'}
      width="24"
      height="24"
    />
  </div>
  <div class="timeline-content">
    <div class="timeline-date">
      {event.startDate} - {event.endDate}
    </div>

    <h3 class="timeline-title">
      {event.title}
    </h3>

    {event.type === 'education' ? (
      <p class="timeline-institution">{event.institution}</p>
    ) : (
      <p class="timeline-institution">{event.institution} | {event.schedule}</p>
    )}

    <p class="timeline-location">{event.location}</p>

    {event.description && (
      <p class="timeline-description">{event.description}</p>
    )}
  </div>
</div>

<style>
  .timeline-item {
    position: relative;
    width: 45%;
    padding: 4px 6px;
    margin-bottom: 6px;
    background: transparent;
    border-radius: 6px;
    clear: both;
  }

  .timeline-item.left {
    float: left;
    text-align: right;
    padding-right: 20px;
  }

  .timeline-item.right {
    float: right;
    text-align: left;
    padding-left: 20px;
  }

  .timeline-icon {
    position: absolute;
    top: 8px;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #0f172a;
    border-radius: 50%;
    padding: 3px;
    z-index: 1;
  }

  .timeline-item.left .timeline-icon {
    right: -22px;
  }

  .timeline-item.right .timeline-icon {
    left: -22px;
  }

  .timeline-icon img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    filter: brightness(0) invert(1);
  }

  .timeline-content {
    display: block;
  }

  .timeline-date {
    display: inline-block;
    font-size: 0.65rem;
    font-weight: 600;
    padding: 0.15rem 0.35rem;
    margin-bottom: 0.25rem;
    background: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.4);
    border-radius: 4px;
    color: #2563eb;
  }

  .timeline-title {
    font-size: 0.95rem;
    font-weight: 700;
    margin: 0.25rem 0 0.15rem 0;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    line-height: 1.15;
    text-wrap: balance;
  }

  .timeline-item.right .timeline-title {
    justify-content: flex-start;
  }

  .timeline-item.left .timeline-title {
    justify-content: flex-end;
  }

  .timeline-institution {
    font-size: 0.8rem;
    font-weight: 600;
    margin: 0.15rem 0 0.1rem 0;
    opacity: 0.9;
    line-height: 1.3;
    text-wrap: balance;
  }

  .timeline-location {
    font-size: 0.7rem;
    opacity: 0.65;
    margin: 0.05rem 0;
    font-weight: 500;
  }

  .timeline-description {
    font-size: 0.75rem;
    margin: 0.25rem 0;
    line-height: 1.25;
  }

  @media (max-width: 768px) {
    .timeline-item {
      width: 100%;
      float: none;
      text-align: left;
      padding-left: 50px;
      padding-right: 20px;
    }

    .timeline-item.left,
    .timeline-item.right {
      float: none;
      text-align: left;
      padding-left: 50px;
      padding-right: 20px;
    }

    .timeline-item.left .timeline-icon,
    .timeline-item.right .timeline-icon {
      left: 4px !important;
      right: auto !important;
    }

    .timeline-title {
      justify-content: flex-start !important;
    }
  }
</style>
